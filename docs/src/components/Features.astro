---
import { getCollection, render } from "astro:content";

import Feature from "./Feature.astro";

const rawFeatures = await getCollection("feature");
const features = await Promise.all(
  rawFeatures
    .sort((a, b) => a.data.sortOrder - b.data.sortOrder)
    .map(async (feature) => {
      const { Content } = await render(feature);
      return {
        ...feature,
        Content,
      };
    }),
);
---

<section aria-label="RocketSim features">
  {
    features.map(({ data, Content }) => (
      <Feature data={data}>
        <Content />
      </Feature>
    ))
  }
</section>
