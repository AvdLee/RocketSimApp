---
import { getCollection, render } from "astro:content";

import BaseLayout from "../layouts/BaseLayout.astro";
import Navigation from "../components/Navigation.astro";

const rawFeatures = await getCollection("feature");
const features = await Promise.all(
  rawFeatures.map(async (feature) => {
    const { Content } = await render(feature);
    return {
      ...feature,
      Content,
    };
  }),
);
---

<BaseLayout pageTitle="Build Apps Faster - RocketSim">
  <header>
    <Navigation />
  </header>
  <main>
    {
      features.map((feature) => (
        <>
          <h2>{feature.data.title}</h2>
          <feature.Content />
        </>
      ))
    }
  </main>
</BaseLayout>
